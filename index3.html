<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>lesson 15</title>
</head>
<body>
<script>
    // Создать сеттер `model` (не связывать с задачей №2), который принимает объект и выполняет `update` всех существующих свойств в текущем объекте.
    //     `obj = {x:10, y: 20, p: 15};`
    //     `obj.model = { x: { value: 33, operation: '*' }, z: { value: 75, operation: '+' }, p: { value: 4, operation: '%' } }`
    //     `console.log(obj); -> {x:330, y: 20, z: 75, p: 3}`

   // let obj = {
   //     x:10,
   //     y: 20,
   //     p: 15,
   //     set model(value){
   //         for (key in value){
   //             console.log(key);
   //             console.log(value[key]);
   //             for (innerKey in value[key]){
   //                  console.log();
   //                 if(key==='x' && value[key]['value'] ) {
   //                     // alert('asdasd');
   //                     operationSign=value[key]['operation'];
   //                     if(value[key]['operation']==='*'){
   //                         this.x=this.x*value[key]['value'];
   //                         value[key]['value']=false;
   //                     }
   //                     /*console.log(this.x);*/
   //                     console.log(value[key]['value']);
   //
   //                     // alert('yes')}
   //                     // console.log(value[key][innerKey]);
   //                 }
   //             }
   //         }
   //
   //     },
   //     operationCheck(operationSign){
   //          if (operationSign==='*'){
   //
   //          }
   //     }
   //
   // };
   //  obj.model = { x: { value: 33, operation: '*' }, z: { value: 75, operation: '+' }, p: { value: 4, operation: '%' } };
   //  console.log(obj)


    // let obj = {
    //     x:10,
    //     y: 20,
    //     p: 15,
    //     set model(value){
    //         dataArr=[];
    //         for(outerKey in obj){
    //             if (
    //
    //             ){
    //             }
    //
    //         }
    //             for (key in value){
    //                 for (innerKey in value[key]) {
    //                     if (outerKey==key){
    //                         i=1;
    //                         alert(i);
    //                         i++
    //                     }
    //
    //             }
    //         }
    //
    //                 // console.log(this.key+'   <---this.x');
    //                 // console.log(value+'   <---value');
    //                 // console.log(value[key]+'   <---value[key]');
    //
    //                 // console.log(innerKey+'   <---innerKey');
    //                 // console.log(value[key][innerKey]+'   <---value[key][innerKey]');
    //                 // if(this.x===innerKey){
    //                 //     value[key]=
    //                 // }
    //
    //
    //
    //     },
    //     // operationCheck(operationSign){
    //     //     if (operationSign==='*'){
    //     //
    //     //     }
    //     // }
    //
    // };
    // obj.model = { x: { value: 33, operation: '*' }, z: { value: 75, operation: '+' }, p: { value: 4, operation: '%' } };
    // console.log(obj);
    // console.log(dataArr);
    //------------------------------------ЭТО МОИ НАРАБОТКИ, НЕ ОБРАЩАЙ ВНИМАНИЯ, ХОТЕЛ СДЕЛАТЬ УНИВЕРСАЛЬНЫМ МЕТОД, НО ВРЕМЕНИ ПОКА НЕТ, КОГДАНИТЬ ДОБЕРУСЬ ДО НЕГО))))----------------------------------------------

    let obj = {
        x:10,
        y: 20,
        p: 15
    };

    Object.defineProperty(obj, 'model', {
        set (valueUpdate) {
            let newObg = {};
            for(let i = 0, arrays = [obj, valueUpdate]; i < arrays.length; i++){
                for(let key in arrays[i]){  //console.log(key); //console.log(arrays[i][key]); значение
                    if(newObg[key] == undefined){
                        newObg[key] = arrays[i][key];
                        //console.log(arrays[i][key].value);
                        //console.log(arrays[i][key].value);
                        //console.log(key);
                        //console.log((newObg[key]));
                    } else if (key === 'x'){
                        newObg[key] = newObg[key] * arrays[i][key].value;
                    } else if (key === 'z') {
                        newObg[key] = newObg[key] + arrays[i][key].value;
                    } else if (key === 'p') {
                        newObg[key] = newObg[key] % arrays[i][key].value;
                    };
                };

                for ( let i in newObg){
                    if ( typeof newObg[i] == 'object') {
                        newObg[i] =  newObg[i].value;
                    }
                }
            }

            valueUpdate =newObg;
            obj = valueUpdate;

        }
    });

    obj.model = {
        x: {
            value: 33,
            operation: '*' },
        z: {
            value: 75,
            operation: '+'
        },
        p: {
            value: 4,
            operation: '%'
        }
    };

    console.log(obj);

</script>
</body>
</html>